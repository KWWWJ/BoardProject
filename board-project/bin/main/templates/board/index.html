<html lang="ko" mxlns:th="http://www.thymeleaf.org">

<head th:fragment="boardFragmentHead"></head>

<head>
  <meta charset="UTF-8">
  <title>게시판</title>
</head>

<body>

  <div th:fragment="boardFragment" class="board container">

    <!-- <th:block th:if="${session.userName != null}">
      <div th:replace="~{/board/add :: addFragment}"></div>
    </th:block> -->

    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">제목</th>
          <th scope="col">작성자</th>
          <th scope="col">아이디</th>
          <th scope="col">작성일자</th>
        </tr>
      </thead>
      <tbody>
        <!-- <tr th:each="item, i : ${list}">
          <th scope="row" th:text="*{id}"></th>
          <td onclick="contentPageOn()" th:text="${item.title}"></td>
          <td th:text="${userId[i.index]}"></td>
          <td th:text="${item.createdAt}"></td>
        </tr> -->
        <tr th:each="item : ${list}" th:object="${item}">
          <th scope="row" th:text="*{id}"></th>
          <td class="hover-event" th:text="*{title}" th:onclick="contentPageOn([[*{id}]])"></td>
          <td class="hover-event" th:text="*{userName}" th:onmouseover="showUser([[*{usersUserId}]])"></td>
          <td th:text="*{usersUserId}"></td>
          <td th:text="*{createdAt}"></td>
        </tr>
    </table>
    <div class="page-bar">
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <li class="page-item">
            <a class="page-link" href="?page=1" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <div class="created-page"></div>
          <li class="page-item">
            <a class="page-link" href="?page=6" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
        <script>
          function contentPageOn(id) {
            location.href = "/content?id=" + id;
          }
          function createPage(number) {
            let page = '<li class="page-item"><a class="page-link" href="?page=' + number + '">' + number + '</a></li>';
            const pageBox = document.createElement('li')
            pageBox.innerHTML = page;
            document.querySelector('.created-page').prepend(pageBox);
          }

          const list = [[${ pageLength }]];
          for (let index = 0; index < list; index++) {
            createPage(index + 1);
          }

          function showUser(userId) {
            alert(userId);
          }
        </script>
      </nav>
    </div>
  </div>
  <div id="isLogin" th:text="${isLogin}"></div>
</body>

</html>